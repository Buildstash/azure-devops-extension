{
  "$schema": "https://raw.githubusercontent.com/Microsoft/azure-pipelines-task-lib/master/tasks.schema.json",
  "id": "3f545110-1fcc-4eb1-b09b-7342dbc5eeeb",
  "name": "BuildstashUpload",
  "friendlyName": "Buildstash Upload",
  "description": "Upload build artifacts to Buildstash platform",
  "helpMarkDown": "Uploads build artifacts (binary files and optional expansion files) to the Buildstash platform for artifact management.",
  "category": "Utility",
  "visibility": [
      "Build",
      "Release"
  ],
  "author": "Buildstash",
  "version": {
    "Major": 1,
    "Minor": 0,
    "Patch": 6
  },
  "instanceNameFormat": "Buildstash Upload",
  "inputs": [
    {
      "name": "primaryFilePath",
      "type": "filePath",
      "label": "Primary File Path",
      "defaultValue": "",
      "required": true,
      "helpMarkDown": "Path to the primary build artifact file to upload"
    },
    {
      "name": "expansionFilePath",
      "type": "filePath",
      "label": "Expansion File Path",
      "defaultValue": "",
      "required": false,
      "helpMarkDown": "Path to the optional expansion file to upload"
    },
    {
      "name": "structure",
      "type": "pickList",
      "label": "Structure",
      "defaultValue": "file",
      "required": true,
      "options": {
        "file": "file",
        "file+expansion": "file+expansion"
      },
      "helpMarkDown": "Structure type for the upload"
    },
    {
      "name": "apiKey",
      "type": "string",
      "label": "API Key",
      "defaultValue": "",
      "required": true,
      "helpMarkDown": "Buildstash API key for authentication"
    },
    {
      "name": "versionComponent1Major",
      "type": "string",
      "label": "Version Major",
      "defaultValue": "",
      "required": false,
      "helpMarkDown": "Major version component"
    },
    {
      "name": "versionComponent2Minor",
      "type": "string",
      "label": "Version Minor",
      "defaultValue": "",
      "required": false,
      "helpMarkDown": "Minor version component"
    },
    {
      "name": "versionComponent3Patch",
      "type": "string",
      "label": "Version Patch",
      "defaultValue": "",
      "required": false,
      "helpMarkDown": "Patch version component"
    },
    {
      "name": "versionComponentExtra",
      "type": "string",
      "label": "Version Extra",
      "defaultValue": "",
      "required": false,
      "helpMarkDown": "Extra version component"
    },
    {
      "name": "versionComponentMeta",
      "type": "string",
      "label": "Version Meta",
      "defaultValue": "",
      "required": false,
      "helpMarkDown": "Meta version component"
    },
    {
      "name": "customBuildNumber",
      "type": "string",
      "label": "Custom Build Number",
      "defaultValue": "",
      "required": false,
      "helpMarkDown": "Custom build number"
    },
    {
      "name": "ciPipeline",
      "type": "string",
      "label": "CI Pipeline",
      "defaultValue": "",
      "required": false,
      "helpMarkDown": "CI pipeline name"
    },
    {
      "name": "ciRunId",
      "type": "string",
      "label": "CI Run ID",
      "defaultValue": "",
      "required": false,
      "helpMarkDown": "CI run ID"
    },
    {
      "name": "ciRunUrl",
      "type": "string",
      "label": "CI Run URL",
      "defaultValue": "",
      "required": false,
      "helpMarkDown": "CI run URL"
    },
    {
      "name": "ciBuildDuration",
      "type": "string",
      "label": "CI Build Duration",
      "defaultValue": "",
      "required": false,
      "helpMarkDown": "CI build duration"
    },
    {
      "name": "vcHostType",
      "type": "string",
      "label": "Version Control Host Type",
      "defaultValue": "",
      "required": false,
      "helpMarkDown": "Version control host type"
    },
    {
      "name": "vcHost",
      "type": "string",
      "label": "Version Control Host",
      "defaultValue": "",
      "required": false,
      "helpMarkDown": "Version control host"
    },
    {
      "name": "vcRepoName",
      "type": "string",
      "label": "Repository Name",
      "defaultValue": "",
      "required": false,
      "helpMarkDown": "Repository name"
    },
    {
      "name": "vcRepoUrl",
      "type": "string",
      "label": "Repository URL",
      "defaultValue": "",
      "required": false,
      "helpMarkDown": "Repository URL"
    },
    {
      "name": "vcBranch",
      "type": "string",
      "label": "Branch",
      "defaultValue": "",
      "required": false,
      "helpMarkDown": "Branch name"
    },
    {
      "name": "vcCommitSha",
      "type": "string",
      "label": "Commit SHA",
      "defaultValue": "",
      "required": false,
      "helpMarkDown": "Commit SHA"
    },
    {
      "name": "vcCommitUrl",
      "type": "string",
      "label": "Commit URL",
      "defaultValue": "",
      "required": false,
      "helpMarkDown": "Commit URL"
    },
    {
      "name": "platform",
      "type": "string",
      "label": "Platform",
      "defaultValue": "",
      "required": false,
      "helpMarkDown": "Platform information"
    },
    {
      "name": "stream",
      "type": "string",
      "label": "Stream",
      "defaultValue": "",
      "required": false,
      "helpMarkDown": "Stream information"
    },
    {
      "name": "notes",
      "type": "multiLine",
      "label": "Notes",
      "defaultValue": "",
      "required": false,
      "helpMarkDown": "Additional notes for the upload"
    }
  ],
  "outputVariables": [
    {
      "name": "buildId",
      "description": "Build ID returned from Buildstash"
    },
    {
      "name": "pendingProcessing",
      "description": "Whether the build is pending processing"
    },
    {
      "name": "buildInfoUrl",
      "description": "URL to view build information"
    },
    {
      "name": "downloadUrl",
      "description": "URL to download the uploaded artifact"
    }
  ],
  "execution": {
    "Node10": {
      "target": "index.js"
    },
    "Node16": {
      "target": "index.js"
    },
    "Node20_1": {
      "target": "index.js"
    }
  }
} 